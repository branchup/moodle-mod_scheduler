define(["jquery","core/ajax","core/notification","core/str"],function(a,b,c,d){function e(b,c){this.cmid=c,b.on("click",f,function(b){b.preventDefault();var c=a(b.target).closest(g);this.triggerRevoke(c)}.bind(this))}var f=".otherstudent a.revoke-student",g=".otherstudent";return e.prototype.triggerRevoke=function(a){var b=parseInt(a.data("appointmentid"),10);b&&d.get_strings([{key:"confirmation",component:"core_admin"},{key:"confirmsinglerevoke",component:"mod_scheduler"},{key:"yes",component:"core"},{key:"no",component:"core"}]).then(function(d){c.confirm(d[0],d[1],d[2],d[3],function(){a.hide(),this.revokeAppointment(b).then(function(){a.remove()}).fail(function(b){a.show(),c.exception(b)})}.bind(this),function(){})}.bind(this)).fail(c.exception)},e.prototype.revokeAppointment=function(a){return b.call([{methodname:"mod_scheduler_revoke_appointment",args:{cmid:this.cmid,appointmentid:a}}])[0]},{init:function(b,c){new e(a(b),c)}}});